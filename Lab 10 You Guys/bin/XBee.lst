*** EVALUATION ***
ANSI-C/cC++ Compiler for HC12 V-5.0.41 Build 10203, Jul 23 2010

    1:  
    2:  #include "derivative.h"      /* derivative-specific definitions */
    3:  #include "SCIb.h"
    4:  #include "XBee.h"
    5:  
    6:  
    7:  FrameType frame;
    8:  char data[30];
    9:  
   10:  /*-----------------------XBee_Init----------------------------
   11:    Initialize XBee
   12:    Inputs: none
   13:    Outputs: none */
   14:  void XBee_Init(void)
   15:  {
*** EVALUATION ***

Function: XBee_Init
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

   16:    char OK[2]={'a','a'};
  0000 c661         [1]     LDAB  #97
  0002 6bae         [2]     STAB  2,-SP
  0004 6b81         [2]     STAB  1,SP
   17:    FrameID = 1;
  0006 c601         [1]     LDAB  #1
  0008 87           [1]     CLRA  
  0009 7c0000       [3]     STD   FrameID
   18:    /*while((OK[0]!='O')&&(OK[1]!='K')) 
   19:    {
   20:      SCIb_OutChar('X');//Send a dummy character like ‘X’
   21:      Timer_Wait10ms(110);//Wait 1.1 second (1 sec guard time)
   22:      SCIb_OutString("+++");//Output '+++'
   23:      Timer_Wait10ms(110);//Wait 1.1 second (1 sec guard time)
   24:      SCIb_InString(OK,3);//Wait for response, should be OK<CR>
   25:      //Repeat if you do not get an OK
   26:    }*/
   27:  }
  000c 3a           [3]     PULD  
  000d 3d           [5]     RTS   
   28:  
   29:  /*-----------------------XBee_CreateTxFrame-------------------
   30:    Creates a frame of char data
   31:    Inputs: Data to be sent
   32:    Outputs: frame structure */
   33:  FrameType XBee_CreateTxFrame(char * data)
   34:  {
*** EVALUATION ***

Function: XBee_CreateTxFrame
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

  0000 6ca9         [2]     STD   7,-SP
   35:    short length = sizeof(data)/sizeof(char);
  0002 c602         [1]     LDAB  #2
  0004 87           [1]     CLRA  
  0005 6c85         [2]     STD   5,SP
   36:    unsigned char checkSum = 0;
  0007 6a82         [2]     STAA  2,SP
   37:    short i = 0;
   38:    for(i = 0; i < length; i++)
  0009 c7           [1]     CLRB  
  000a 6c83         [2]     STD   3,SP
   39:    {
   40:  	  checkSum += data[i];
  000c ec80         [3]     LDD   0,SP
  000e e383         [3]     ADDD  3,SP
  0010 b745         [1]     TFR   D,X
  0012 e600         [3]     LDAB  0,X
  0014 eb82         [3]     ADDB  2,SP
  0016 6b82         [2]     STAB  2,SP
  0018 ee83         [3]     LDX   3,SP
  001a 08           [1]     INX   
  001b 6e83         [2]     STX   3,SP
  001d ae85         [3]     CPX   5,SP
  001f 2deb         [3/1]   BLT   *-19 ;abs = 000c
   41:    }
   42:    checkSum += 0x01;
  0021 6282         [3]     INC   2,SP
   43:    checkSum += FrameID;
  0023 f60000       [3]     LDAB  FrameID:1
  0026 eb82         [3]     ADDB  2,SP
  0028 6b82         [2]     STAB  2,SP
   44:    checkSum = 0xFF - checkSum;
  002a c6ff         [1]     LDAB  #255
  002c e082         [3]     SUBB  2,SP
   45:    frame.length = length;
  002e ee85         [3]     LDX   5,SP
  0030 7e0000       [3]     STX   frame
   46:    frame.data = data;
  0033 ed80         [3]     LDY   0,SP
  0035 7d0000       [3]     STY   frame:2
   47:    frame.checkSum = checkSum;
  0038 7b0000       [3]     STAB  frame:4
   48:    frame.frameID = FrameID++;
  003b fd0000       [3]     LDY   FrameID
  003e 7d0000       [3]     STY   frame:5
  0041 02           [1]     INY   
  0042 7d0000       [3]     STY   FrameID
   49:    if(FrameID > 255)
  0045 f60000       [3]     LDAB  FrameID
  0048 2f04         [3/1]   BLE   *+6 ;abs = 004e
   50:    {
   51:  	  FrameID = 1;
  004a 09           [1]     DEX   
  004b 7e0000       [3]     STX   FrameID
   52:    }
   53:    return frame;
  004e ee89         [3]     LDX   9,SP
  0050 f60000       [3]     LDAB  frame
  0053 6b00         [2]     STAB  0,X
  0055 fc0000       [3]     LDD   frame:1
  0058 6c01         [2]     STD   1,X
  005a fc0000       [3]     LDD   frame:3
  005d 6c03         [2]     STD   3,X
  005f fc0000       [3]     LDD   frame:5
  0062 6c05         [2]     STD   5,X
   54:  }
  0064 1b87         [2]     LEAS  7,SP
  0066 3d           [5]     RTS   
   55:  
   56:  /*-----------------------XBee_SendTxFrame-------------------
   57:    Sends a frame to SCI Out
   58:    Inputs: Data to be sent
   59:    Outputs: frame structure */
   60:  void XBee_SendTxFrame(FrameType data_frame)
   61:  {
*** EVALUATION ***

Function: XBee_SendTxFrame
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

  0000 3b           [2]     PSHD  
   62:    int i;
   63:    SCIb_OutChar(0x7E);
  0001 c67e         [1]     LDAB  #126
  0003 160000       [4]     JSR   SCIb_OutChar
   64:    SCIb_OutChar((char)((data_frame.length & 0xFF00) >> 8));
  0006 ec84         [3]     LDD   4,SP
  0008 b701         [1]     TFR   A,B
  000a 160000       [4]     JSR   SCIb_OutChar
   65:    SCIb_OutChar((char)(data_frame.length & 0x00FF));
  000d e685         [3]     LDAB  5,SP
  000f 160000       [4]     JSR   SCIb_OutChar
   66:    SCIb_OutChar(0x01);
  0012 c601         [1]     LDAB  #1
  0014 160000       [4]     JSR   SCIb_OutChar
   67:    SCIb_OutChar(data_frame.frameID);
  0017 e68a         [3]     LDAB  10,SP
  0019 160000       [4]     JSR   SCIb_OutChar
   68:    for(i = 0; i < data_frame.length; i++) 
  001c c7           [1]     CLRB  
  001d 87           [1]     CLRA  
  001e 6c80         [2]     STD   0,SP
  0020 2010         [3]     BRA   *+18 ;abs = 0032
   69:    {
   70:      SCIb_OutChar(data_frame.data[i]);  
  0022 ec86         [3]     LDD   6,SP
  0024 e380         [3]     ADDD  0,SP
  0026 b745         [1]     TFR   D,X
  0028 e600         [3]     LDAB  0,X
  002a 160000       [4]     JSR   SCIb_OutChar
  002d ee80         [3]     LDX   0,SP
  002f 08           [1]     INX   
  0030 6e80         [2]     STX   0,SP
  0032 ec80         [3]     LDD   0,SP
  0034 ac84         [3]     CPD   4,SP
  0036 2dea         [3/1]   BLT   *-20 ;abs = 0022
   71:    }
   72:    SCIb_OutChar(data_frame.checkSum);
  0038 e688         [3]     LDAB  8,SP
  003a 160000       [4]     JSR   SCIb_OutChar
   73:  }
  003d 3a           [3]     PULD  
  003e 3d           [5]     RTS   
   74:  
   75:  /*-----------------------XBee_RecieveTxFrame-------------------
   76:    Receives a frame from data in
   77:    Inputs: None
   78:    Outputs: Input Frame */
   79:  FrameType XBee_RecieveTxFrame(void)
   80:  {
*** EVALUATION ***

Function: XBee_RecieveTxFrame
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

  0000 6caa         [2]     STD   6,-SP
   81:    short length, i;
   82:    char frameID,checkSum;
   83:    if(SCIb_InChar() != 0x7E)
  0002 160000       [4]     JSR   SCIb_InChar
  0005 c17e         [1]     CMPB  #126
  0007 2664         [3/1]   BNE   *+102 ;abs = 006d
   84:    {
   85:  	  return;
   86:    }
   87:    
   88:    length = SCIb_InChar();
  0009 160000       [4]     JSR   SCIb_InChar
  000c 87           [1]     CLRA  
  000d 6c82         [2]     STD   2,SP
   89:    length = length << 8;
  000f e683         [3]     LDAB  3,SP
  0011 6b82         [2]     STAB  2,SP
  0013 6a83         [2]     STAA  3,SP
   90:    length += SCIb_InChar();
  0015 160000       [4]     JSR   SCIb_InChar
  0018 87           [1]     CLRA  
  0019 e382         [3]     ADDD  2,SP
  001b 6c82         [2]     STD   2,SP
   91:    SCIb_InChar();
  001d 160000       [4]     JSR   SCIb_InChar
   92:    for(i = 0; i < length; i++)
  0020 c7           [1]     CLRB  
  0021 87           [1]     CLRA  
  0022 6c84         [2]     STD   4,SP
  0024 2010         [3]     BRA   *+18 ;abs = 0036
   93:    {
   94:  	  data[i] = SCIb_InChar();
  0026 ee84         [3]     LDX   4,SP
  0028 34           [2]     PSHX  
  0029 160000       [4]     JSR   SCIb_InChar
  002c 30           [3]     PULX  
  002d 6be20000     [3]     STAB  data,X
  0031 ee84         [3]     LDX   4,SP
  0033 08           [1]     INX   
  0034 6e84         [2]     STX   4,SP
  0036 ec84         [3]     LDD   4,SP
  0038 ac82         [3]     CPD   2,SP
  003a 2dea         [3/1]   BLT   *-20 ;abs = 0026
   95:    }
   96:    
   97:    checkSum = SCIb_InChar();
  003c 160000       [4]     JSR   SCIb_InChar
   98:    frame.length = length;
  003f ee82         [3]     LDX   2,SP
  0041 7e0000       [3]     STX   frame
   99:    frame.data = data;
  0044 180300000000 [5]     MOVW  #data,frame:2
  100:    frame.checkSum = checkSum;
  004a 7b0000       [3]     STAB  frame:4
  101:    frame.frameID = FrameID++;
  004d fe0000       [3]     LDX   FrameID
  0050 7e0000       [3]     STX   frame:5
  0053 08           [1]     INX   
  0054 7e0000       [3]     STX   FrameID
  102:    return frame;
  0057 ee80         [3]     LDX   0,SP
  0059 f60000       [3]     LDAB  frame
  005c 6b00         [2]     STAB  0,X
  005e fc0000       [3]     LDD   frame:1
  0061 6c01         [2]     STD   1,X
  0063 fc0000       [3]     LDD   frame:3
  0066 6c03         [2]     STD   3,X
  0068 fc0000       [3]     LDD   frame:5
  006b 6c05         [2]     STD   5,X
  103:  }
  006d 1b86         [2]     LEAS  6,SP
  006f 3d           [5]     RTS   
  104:  
  105:  /*-----------------------XBee_TxStatus------------------------
  106:    Checks the status of XBee
  107:    Inputs: none
  108:    Outputs: 1 if Transmitter was successful, 0 if not */
  109:  short XBee_TxStatus(void)
  110:  {
*** EVALUATION ***

Function: XBee_TxStatus
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

  111:    char OK[2]={'a','a'};
  0000 c661         [1]     LDAB  #97
  0002 6bae         [2]     STAB  2,-SP
  0004 6b81         [2]     STAB  1,SP
  112:    SCIb_InString(OK,3);//Wait for response, should be OK<CR>
  0006 1a80         [2]     LEAX  0,SP
  0008 34           [2]     PSHX  
  0009 c603         [1]     LDAB  #3
  000b 87           [1]     CLRA  
  000c 160000       [4]     JSR   SCIb_InString
  113:    if((OK[0]=='O')&&(OK[1]=='K')) 
  000f e6a1         [3]     LDAB  2,+SP
  0011 c14f         [1]     CMPB  #79
  0013 2609         [3/1]   BNE   *+11 ;abs = 001e
  0015 e681         [3]     LDAB  1,SP
  0017 c14b         [1]     CMPB  #75
  0019 2603         [3/1]   BNE   *+5 ;abs = 001e
  114:    {
  115:      return 1;
  001b c601         [1]     LDAB  #1
  001d 21           [1]     SKIP1 
  116:    }
  117:    return 0;
  001e c7           [1]     CLRB  
  001f 87           [1]     CLRA  
  118:  }
  0020 30           [3]     PULX  
  0021 3d           [5]     RTS   
  119:  
  120:  void sendATCommand(void)
  121:  {
*** EVALUATION ***

Function: sendATCommand
Source  : C:\Users\Raz\Documents\EE 445L\Lab 10\Sources\XBee.c
Options : -Cc -CPUHCS12 -D_HCS12_SERIALMON -D__NO_FLOAT__ -Env"GENPATH=C:\Users\Raz\Documents\EE 445L\Lab 10;C:\Users\Raz\Documents\EE 445L\Lab 10\bin;C:\Users\Raz\Documents\EE 445L\Lab 10\prm;C:\Users\Raz\Documents\EE 445L\Lab 10\cmd;C:\Users\Raz\Documents\EE 445L\Lab 10\Sources;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\lib;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\src;C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"LIBPATH=C:\Program Files\Freescale\CWS12v5.1\lib\HC12c\include" -Env"OBJPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Env"TEXTPATH=C:\Users\Raz\Documents\EE 445L\Lab 10\bin" -Lasm=%n.lst -Ms -ObjN="C:\Users\Raz\Documents\EE 445L\Lab 10\SCIB_DP512_Data\Standard\ObjectCode\XBee.c.o" -WmsgSd1106

  122:    
  123:  }
  0000 3d           [5]     RTS   
